***系统性能是一个系统提供给用户的众多性能指标的混合体，它既包括硬件性能，也包括网络性能和软件性能。***

### 考点1 系统配置方法（双份、双重、热备份、容错、集群）
---

### 考点2 性能计算（响应时间、吞吐量、TAT）
---

计算机系统性能指标以系统响应时间、作业吞吐量为代表。

故障响应时间，故障响应时间是指从出现故障到该故障得到确认修复前的这段时间。该指标一般是用来反映服务水平的。显然，平均故障响应时间越短，对用户系统的影响越小。

性能指标计算的主要方法有定义法、公式法、程序检测法和仪器检测法。定义法主要根据其定义直接获取理想数据，公式法则一般适用于根据基本定义所衍生出的复合性能指标的计算，而程序检测法和仪器检测法则是通过实际的测试来得到其实际值（由于测试的环境和条件不定，其结果也可能相差比较大）。

***响应时间***

系统响应时间是指用户发出完整请求到系统完成任务后给出响应的时间间隔。

有多种方法可以用来测试响应时间，常用的有两种方法，分别是首字节响应时间和末字节响应时间。首字节响应时间是指向服务器发送请求到接收到响应的第一个字节之间的时间，末字节响应时间是指向服务器发送请求与接收到响应的最后一个字节之间的时间。通过测量响应时间，可以知道所有客户端用户完成一笔业务所用的时间以及平均时间和最大时间。
米勒曾经给出了3个经典的有关响应时间的建议，至今仍有参加价值：
- 0.1秒：用户感觉不到任何延迟。
- 1秒：用户愿意接受的系统立即响应的时间极限。即当执行一项任务的有效反馈时间在0.1~1秒之内时，用户是愿意接受的。超过此数据值，则意味着用户会感觉到有延迟，但只要不超过10秒，用户还是可以接受的。
- 10秒：用户保持注意力执行本次任务的极限，如果超过此数值时仍然得不到有效的反馈，用户会在等待计算机完成当前操作时转向其他的任务。

***吞吐量***

吞吐量就是在给定的时间内，系统的吞入能力与吐出能力是多少。

***系统可靠性***

系统可如性是系统在规定的时间内及规定的环境条件下，完成规定功能的能力，也就是系统无故陈运行的概率。

系统可靠性可以通过历史数据和开发数据直接测盘和估算出来，与之相关的概念主要有平均无故障时间、平均故障修复时间、平均故障问隔时间、系统可用性等。



### 考点3 性能设计（系统调整、Amdahl 解决方案、响应特性、负载均衡）
---
性能设计是系统设计过程的一个必备环节，在进行系统分析与设计时，性能设计也非常重要。系统分析与设计实际上是一种平衡设计，需要设计师在各种功能性需求和非功能性需求（性能需求）上做妥善的选择。

***系统调整***

为了优化系统的性能，有时需要对系统进行调整，这种调整也称为性能调整，它是与性能管理相关的主要活动。当系统性能降到最基本的水平时，性能调整由查找和消除瓶颈组成，所谓瓶颈是指系统中的某个硬件或软件接近其容量限制时发生和显示出来的情况。

性能调整是一项循环进行的工作，包括收集、分析、配置和测试4个反复的步骤。

在开始性能调整循环之前，必须做一些准备工作，为正在进行的性能调整活动建立框架。
- 识别约束。约束（如可维护性）在寻求更高的性能方面是不可改变的因素，因此，在寻求提高性能的方法时，必须集中在不受约束的因素上。
- 指定负载。确定系统的客户端需要哪些服务，以及对这些服务的需求程度。用于指定负载的最常用度量标准是客户端数目、客户端思考时间以及负载分布状况。其中客户端思考时间是指客户端接收到答复到提交新请求之间的时间间隔，负载分布状况包括稳定或波动负载、平均负载和峰值负载。
- 设置性能目标。性能目标必须明确，包括识别用于调整的度量标准及其对应的基准值。总的系统吞吐量和响应时间是用于测量性能的两个常用度量标准。识别性能度量标准后，必须为每个度量标准建立可计量的、合理的基准值。

建立了性能调整的边界、约束和目标后，就可以开始进入调整循环了。

1. 收集。收集阶段是任何性能调整操作的起点。在此阶段，只使用为系统特定部分选择的性能计数器集会来收集数据。这些计数器可用于网络、服务器或后端数据库。不论调整的是系统的哪一部分，都需要根据基准测量来比较性能的改变。需要建立系统空闲以及系统执行特定任务时的系统行为模式。因此，可以使用第一次数据收集来建立系统行为值的基准集。基j位建立在系统的行为令人满意时应该看到的典型计数器值。
2. 分析。收集了调整选定系统部分所需的性能数据后，需要对这些数掘进行分析以确定瓶颈。性能数字仅具有指示性，它并不一定就可以确定实际的瓶颈在哪里，因为一个性能问题可能由多个原因所致。
3. 配置。收集了数据并完成结果分析后，可以确定系统的哪部分最适合进行配置更改，然后实现此更改。实现更改的最重要规则是：一次仅实现一个配置更改。看起来与单个组件相关的问题可能是由涉及多个组件的瓶颈导致的。因此，分别处理每个问题很重要。如果同时进行多个更改，将不可能准确地评定每次更改的影响。
4. 测试。实现了配置更改后，必须完成适当级别的测试，确定更改对调整的系统所产生的影响。如果性能提高到预期的水平（达到了预期的目标），这时便可以退出；否则，就必须重新进行调整循环。

***阿姆达尔解决方案***

阿姆达尔（Amdahl）定律是这样的：系统中对某部件采用某种更快的执行方式，所载得的系统性能的改变程度，取决于这种方式被使用的频率，或所占总执行时间的比例。

***负载均衡***

负载均衡是由多台服务器以对称的方式组成一个服务器集合，每台服务器都具有等价的地位，都可以单独对外提供服务而无须其他服务器的辅助。通过某种负载分担技术，将外部发送来的请求均匀地分配到对称纺构中的某一台服务路上，而接收到请求的服务器独立地回应客户的请求。


### 考点4 性能指标（SPEC-Int、SPEC-Fp、TPC、Gibsonmix、响应时间）
---

### 考点5 性能评估
---
性能评估的常用方法有时钟频率法、指令执行速度法、等效指令速度法、数据处理速率法、综合理论性能法和基准程序法等。

#### 时钟频率法

时钟频率（时钟脉冲，主频）是计算机的基本工作脉冲，它控制着计算机的工作节奏。因此，计算机的时钟频率在一定程度上反映了机器速度。时钟周期也称为振荡周期，定义为时钟频率的倒数。时钟周期是计算机中最基本的、最小的时间单位。在一个时钟周期内，CPU仅完成一个最基本的动作。

在计算机中，为了便于管理，常把一条指令的执行过程划分为若干个阶段，每一个阶段完成一项工作。例如：取指令、存储器读、存储器写等，这每一项工作称为一个基本操作。完成一个基本操作所需要的时间称为机器周期。一般情况下， 一个机器周期由若干个时钟周期组成。

指令周期是执行一条指令所需要的时间，一般由若干个机器周期组成。指令不同，所需的机器周期数也不同。对于一些简单的单字节指令，在取指令周期中，指令取出到指令寄存器后，立即译码执行，不再需要其他的机器周期。对于一些比较复杂的指令，例如转移指令、乘法指令，则需要两个或者两个以上的机器周期。

#### 指令执行速度活

在计算机发展的初期，曾用加法指令的运算速度来衡量计算机的速度，速度是计算机的主要性能指标之一。因为加法指令的运算速度大体上可反映出乘法、除法等其他算术运算的速度，而且逻辑运算、转移指令等简单指令的执行时间往往设计成与加法指令相同，因此加法指令的运算速度有一定代表性。

#### 等效指令速度法

等效指令速度法也称为吉普森混合法（Gibsonmix）或混合比例计算法。等效指令速度法是通过各类指令在程序中所占的比例（W1）进行计算得到的。

#### 数据处理速率法

因为在不同程序中，各类指令使用频率是不同的，所以固定比例方法存在着很大的局限性，而且数据长度与指令功能的强弱对解题的速度影响极大。同时，这种方法也不能反映现代计算机中cache、流水线、交叉存储等结构的影响。具有这种结构的计算机的性能不仅与指令的执行频率有关，而且也与指令的执行顺序和地址的分布有关。

#### 综合理论性能法

CTP是美国政府为限制较高性能计算机出口所设置的运算部件综合性能估算方法。CTP以每秒百万次理论运算MTOPS表示。

#### 基准程序法

基准程序法（benchmark）是目前一致承认的测试性能的较好方法，有多种多样的基准程序，如主要测试整数性能的基准程序、测试浮点性能的基准程序等。

### 考点6 了解系统故障管理的基本方法，如处理手续、监视过程、恢复过程、预防措施等。
---

系统故障是指由于部件的失效、环境的物理干扰、操作的错误或不正确的设计引起的硬件或软件中的错误状态。错误（差错）是指故障在程序或数据结构中的具体位置。错误与故障位置之间可能出现一定距离。故障或错误有如下几种表现形式。
- 永久性：描述连续稳定的失效、故障或错误。在硬件中，永久性失效反映了不可恢复的物理改变。
- 间歇性：描述那些由于不稳定的硬件或变化着的硬件或软件状态所引起的、仅仅是偶然出现的故障或错误。
- 瞬时性：描述那些由于暂时的环搅条件而引起的故障或错误。

故障模型是对故障的表现进行抽象，可以建立4个级别的故障模型：
- 逻辑级的故障模型。逻辑级的故障有固定型故障、短路故障、开路故障、桥接故障。固定型故障指电路中元器件的输入或输出等线的逻辑固定为0或固定为1。如某线接地、电源短路或元件失效等都可能造成固定型故障；短路故障是指一个元件的输出线的逻辑值平等于输入线的逻辑值；元件的开路故障是元件的输出线悬空，逻辑值可根据具体电路来决定；桥接故障指两条不应相连的线连接在一起而发生的故障。
- 数据结构级的故障。故障在数据结构上的表现称为差错。常见的差错有独立差错（一个故障的影响表现为使一个二进制位发生改变）、算术差错（一个故障的影响表现为使一个数据的值增加或减少）、单向差错（一个故障的影响表现为使一个二进制向量中的某些位朝一个方向改变）。
- 软件故障和软件差错。软件故障是指软件设计过程造成的与设计说明的不一致，软件故障在数据结构或程序输出中的表现称为软件差错。与硬件不同，软件不会因为环境应力而疲劳，也不会因为时间的推移而衰老。因此，软件故障只与设计有关。常见的软件差错有：非法转移、误转移、死循环、空间溢出、数据执行、非法数据。
- 系统级的故障模型。故障在系统级上的表现为功能错误，即系统输出与系统设计说明的不一致。如果系统输出无故障保护机构，则故障在系统级上的表现就会造成系统失效。

#### 系统可靠性模型

#### 可靠性设计

提高计算机可靠性的技术可以分为避错技术和容错技术。避错是指预防和避免系统在运行中出错。例如，软件测试就是一种避错技术；容错是指系统在其某一组件故障存在的情况下不失效，仍然能够正常工作的特性。简单地说，容错就是当计算机由于种种原因在系统中出现了数据、文件损坏或丢失时，系统能够自动将这些损坏或丢失的文件和数据恢复到发生事故以前的状态，使系统能够连续正常地运行。容错功能一般通过冗余组，件设计来实现，计算机系统的容惜性通常可以从系统的可靠性、可用性和可测性等方面来衡量。

***冗余技术***

实现容错的主要手段就是冗余。冗余是指所有对于实现系统规定功能来说是多余的那部分的资源，包括硬件、软件、信息和时间。通过冗余资源的加入，可以使系统的可靠性得到较大的提高。主要的冗余技术包括结构冗余、信息冗余、时间冗余、冗余附加四种。
1. 结构冗余是常用的冗余技术，按其工作方式，可分为静态冗余、动态冗余和混合冗余三种。
2. 在实现正常功能所需要的信息外，再添加一些信息，以保证运行结果正确性的方法。
3. 使用附加一定时间的方法来完成系统功能。这些附加的时间主要用在故障检测、复查或故障屏蔽上。时间冗余以重复执行指令（指令复执）或程序（程序复算）来消除瞬时错误带来的影响。
4. 指为实现上述冗余技术所需的资源和技术，包括程序、指令、数据、存放和调动他们的空间和通道等。

***软件容错***

软件容错的主要目的是提供足够的冗余信息和算法程序，使系统在实际运行时能够及时发现程序设计错误，采取补救措施，以提高软件可靠性，保证整个计算机系统的正常运行。软件容错技术主要有恢复块方法、N 版本程序设计和防卫式程序设计等。

***集群技术***

集群（cluster）是由两台以上节点机（服务器）构成的一种松散耦合的计算节点集合，为用户提供网络服务或应用程序（包括数据库、Web 服务和i文件服务等）的单一客户视图，同时提供接近容错机的故障恢复能力。
