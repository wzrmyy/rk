### 考点1 嵌入式操作系统
---

***嵌入式系统***

嵌入式系统是一种以应用为中心，以计算机技术为基础，可以适应不间应用对功能、可靠性、成本、体积、功耗等方面的要求，集可配置可裁减的软、硬件于一体的专用计算机系统。它具有很强的灵活性，主要由嵌入式硬件平台、相关支撑硬件、嵌入式操作系统、支撑软件以及应用软件组成。

***嵌入式系统的特点***
- 系统专用性强
- 软、硬件依赖性强
- 系统实时性强
- 处理器专用
- 多种技术紧密综合
- 系统透明性
- 系统资源受限

***实时系统***

简单地说，实时系统可以看成对外部事件及时响应的系统。现实世界中，并非所有的嵌入式系统都具有实时特性，所有的实时系统也不一定都是嵌入式的。但这两种系统并不互相排斥，兼有这两种特性的系统称为实时嵌入式系统(Real-Time Embedded System, RTES)，通常简称为实时系统。我们先介绍与RTES相关的几个概念。
- 逻辑(或功能)正确：指系统对外部事件的处理能够产生正确的结果。
- 时间正确：指系统对外部事件的处理必须在预定的周期内完成。
- 死线(Deadline)：指系统必须对外部事件处理的最迟时间界限，错过此界限可能产生严重后果。通常，计算必须在到达死线前完成。
- 实时系统：指功能正确和时间正确同时满足的系统，二者同等重要。换言之，实时系统有时间约束并且是死线驱动的。但是在某些系统中，为了保证功能正确性，有可能牺牲时间正确性。

***嵌入式系统的基本体系结构***

嵌入式系统一般都由软件和硬件。两个部分组成，其中嵌入式处理器、存储器和外部设备构成整个系统的硬件基础。嵌入式系统的软件部分可以分为主个层次，分别是系统软件、支撑软件和应用软件，其中系统软件和支撑软件是基础，应用软件则是最能体现整个嵌入式系统的特点和功能的部分。

***硬件体系结构***

微处理器是整个嵌入式系统的核心，负责控制系统的执行。外部设备是嵌入式系统同外界交互的通道，常见的外部设备有flash存储器、键盘、输入笔、触摸屏、液晶显示器等，在很多嵌入式系统中还有与系统用途紧密相关的各种专用外设。嵌入式系统中经常使用的存储器有3种类型，分别是RAM、ROM和混合存储器。系统的存储器用于存放系统的程序代码、数据和系统运行的结果。

嵌入式系统的核心部件是各种类型的嵌入式处理器，根据目前的使用情况，嵌入式处理器可以分为如下几类：
- 嵌入式微处理器。由通用计算机中的CPU演变而来，在功能上跟普通的微处理器基本一致，但是它具有体积小、功耗低、质量轻、成本低及可靠性高的优点。通常，嵌入式微处理器和ROM、RAM、总线接口及外设接口等部件安装在一块电路板上，称为单板计算机。
- 嵌入式微控制器。又称为单片机，整个计算机系统都集成到一块芯片中。嵌入式微控制器一般以某一种微处理器内核为核心，芯片内部集成有存储器、总绪、总线逻辑、定时器／计数器、监督定时器、并口／串口、数模／棋、数转换器、闪存等必要外设。与嵌入式微处理器相比，嵌入式微控制器的最大特点是单片化，因而体积更小、功耗和成本更低，雨’盖在性更高。
- 嵌入式数字信号处理。一种专门用于信号处理的处理器，DSP(Digital Signal Processor，数字信号处理器)是芯片内部采用程序和数据分开的结构，具有专门的硬件乘法器，广泛采用流水线操作，提供特殊的DSP指令，可以用来快速实现各种数字信号的处理算法。目前，DSP在嵌入式系统中使用非常广泛，如数字滤波、快速傅立叶变换及频谱分析等。
- 嵌入式片上系统。一种在一块芯片上集成很多功能模块的复杂系统，例如，把微处理器内核、RAM、USB、IEEE 1394、Bluetooth等集成到一个芯片中，构成一个嵌入式片上系统，从而大幅度缩小了系统的体积、降低了系统的复杂度、增强了系统的可靠性。在大量生产时，生产成本也远远低于单元部件组成的电路报系统。根据用途不同，嵌入式片上系统可以分为通用片上系统和专用片上系统两类。专用类的嵌入式片上系统一般是针对某一或某些系统而设计的。

***软件体系结构***

这个体系自底向上由3部分组成，分别是嵌入式操作系统、支撑软件和应用软件。
- 嵌入式操作系统(Embedded Operating System, EOS)由操作系统内核、应用程序接口、设备驱动程序接口等几部分组成。
- 嵌入式系统中的支撑软件由窗口系统、网络系统、数据库管理系统及Java虚拟机等几部分组成。
- 嵌入式系统中的应用软件是系统整体功能的集中体现。

***嵌入式操作系统***

EOS是指运行在嵌入式计算机系统上的支持嵌入式应用程序的操作系统，是用于控制和管理嵌入式系统中的硬件和软件资源、提供系统服务的软件集合。
- 微型化
- 代码质量高
- 专业化
- 实时性强
- 可裁减、可配置

嵌入式操作系统的实时性上，可以分为实时嵌入式操作系统(Real-Time embedded Operatiing System, RTOS)和非实时嵌入式操作系统两类。
- 实时嵌入式操作系统。RTOS支持实时系统工作，其首要任务是调度一切可利用资源，以满足对外部事件响应的实时时限，其次着眼于提高系统的使用效率。RTOS主要用在控制、通信等领域。
- 非实时嵌入式操作系统。这类操作系统不特别关注单个任务响应时限，其平均性能、系统效率和资源利用率一般较高，适合子实时性要求不严格的消费类电子产品，如个人数字助理、机顶盒等。

与通用计算机系统上的操作系统一样，EOS隔离了用户与计算机系统的硬件，为用户提供了功能强大的虚拟计算机系统。EOS主要自应用程序接口、设备驱动、操作系统内核等几部分组成。

EOS是一个按时序方式调度执行、管理系统资源并为应用代码提供服务的基础软件。每个EOS都有一个内核。另一方面，EOS也可以是各种模块的有机组合，包括内核、文件系统、网络协议校和其他部件。但是，大多数内核都包含以下3个公共部件：
- 调度器。是EOS的心脏，提供一组算法决定何时执行哪个任务。
- 内核对象。是特殊的内核构件，帮助创建嵌入式应用。
- 内核服务。是内核在对象上执行的操作或通用操作。

***多任务调度机制***
- 任务。任务是独立执行的线程，线程中包含着独立的可调度的指令序列。实时应用程序的设计过程包括如何把问题分割成多个任务，每个任务是整个应用的一个组成部分，每个任务被赋予一定的优先级，有自己的一套寄存器和钱空间。在大多数典型的抢占式调度内核中，在任何时候，无论是系统任务还是应用任务，其状态都会处于就绪、运行、阻塞三个状态之一。另外，某些商业内核还定义了挂起、延迟等颗粒更细的状态。
- 任务对象。任务是由不同的参数集合和支持的数据结构定义。在创建任务时，每个任务部拥有一个相关的名字、一个唯一的标识号ID、一个优先级、一个任务控制块、一个堆栈和一个任务的执行例程，这些部件一起组成一个任务对象。
- 多任务。多任务是操作系统在预定的死线内处理多个活动的能力。多任务的运行使CPU的利用率得到最大地发挥，并使应用程序模块化。随着调度的任务数量的增加，对CPU的性能需求也随之增加，主要是由于线程运行的上下文切换增加的缘故。
- 调度器。调度器是每个内核的心脏，调度器提供决定何时哪个任务运行的算法。多数实时内核是基于优先级调度的。
- 可调度实体。可调度实体是一个可以根据预定义的调度算法，竞争到系统执行时间的内核对象。
- 上下文切换。每个任务都有自己的上下文，它是每次被调度运行时所要求的寄存器状态，当多任务内核决定运行另外的任务时，它保存正在运行的任务的上下文，恢复将要运行下一任务的上下文，并运行下一任务，这个过程称为上下文切换。在任务运行时，其上下文是高度动态的。调度器从一个任务切换到另一个任务所需要的时间称为上下文切换开销。
- 可重入性。指一段代码被一个以上的任务调用，而不必担心数据的破坏。具有可重入性的函数任何时候都可以被中断，一段时间以后继续运行，相应数据不会遭到破坏。
- 分发器。分发器是调度器的一部分，执行上下文切换并改变执行的流程。分发器完成上下文切换的实际工作并传递控制。任何时候，执行的流程通过三个区域之一：应用任务、ISR(Interrupt Service Routines，中断服务程序)或内核。

***调度算法***

当前，大多数内核支持两种普遍的调度算法，即基于优先级的抢占调度算法和时间轮转调度算法。
- 基于优先级的抢占调度。基予优先级的抢占调度又可以分为静态优先级和动态优先级。静态优先级是指应用程序在执行的过程中各任务的优先级固定不变。在静态优先级系统中，各任务以及它们的时间约束在程序编译时是已知的；动态优先级是指应用程序在执行的过程中各任务的优先级可以动态改变。这种类型的调度，在任何时候运行的任务是所有就绪任务中具有最高优先级的任务，任务在创建时被赋予了优先级，任务的优先级可以由内核的系统调用动态而更改，这使得嵌入式应用对于外部事件的响应更加灵活，从而建立真正的实时响应系统。
- 时间轮转调度。时间轮转调度算法为每个任务提供确定份额的CPU执行时间。显然，纯粹的时间轮转调度是不能满足实时系统的要求的。取而代之的是，基于优先级抢占式扩充时间轮转调度，对于优先级相同的任务使用时间片获得相等的CPU执行时间。内核在满足以下条件时，把CPU控制权转交给下一个就绪态的任务：
    1. 当前任务已无事可做。
    2. 当前任务的时间片还没用完任务就已经结束了。

内核提供任务管理服务，也提供一个允许开发者操作任务的系统调用，典型的任务操作有任务创建和删除、任务调度控制、任务信息获取。

***内核对象***
1. 信号量。为了同步一个应用的多个并发线程和协调它们对共享资源的互斥访问，内核提供了一个信号量对象和相关的信号盘管理服务。信号盘是一个内核对象，就像一把锁，任务获取了该信号盘就可以执行期望的操作或访问相关资源，从而达到同步或互斥的目的。信号量可以分为如下3类：二值信号量、计数信号量、互斥信号量。通常，内核支持以下几种操作：创建和删除信号量操作、获取和释放信号量操作、消除信号量的等待队列操作以及获取信号量的信息操作。
2. 消息队列。多数情况下，任务活动同步并不足以满足实时响应的要求，任务之间还必须能够交换信息。为了实现任务之间的数据交换，内核提供了消息队列对象和捎息队列的管理服务。消息队列是一个类似于缓冲区的对象，通过它，任务和ISR 可以发送和接收消息，实现数据通信。消息队列暂时保存来自发送者的消息，直到有接收者准备读取这些消息为止。大多数内核支持以下消息队列操作：创建和删除消息队列、发送和接收消息以及获取消息队列的信息等操作。
3. 管道。管道是提供非结构化数据交换和实现任务同步的内核对象。每个管道有两个端口，一端用来读，另一端用来写。数据在管道中就像一个非结构的字节流，数据按照FIFO方式从管道中读出。一般EOS 内核支持两类管道对象：
    - 命名管道。具有一个类似于文件名的名字，像一个文件或设备出现在文件系统中，需要使用命名管道的任何任务或ISR都可以用误名字对其引用。
    - 无名管道。一般动态创建，且必须使用创建时返回的描述符才可引用此类型的管道。
    
    通常，管道支持以下几种操作：创建和删除一个管道、读、写管道、管道控制、管道上的轮询。
4. 事件。某些特殊的EOS提供一个特殊的寄存器作为每个任务控制块的一部分，称为事件寄存器。它是一个属于任务的对象，并由一组跟踪指定事件的二值事件标志组成。EOS支持事件寄存器机制，创建一个任务时，内核同时创建一个事件寄存器作为任务控制块的一部分。经过事件寄存器，一个任务可以检查控制它执行的特殊事件是否出现。
5. 信号。信号是当一个事件发生时产生的软中断，它将信号接收看从其正常的执行路径移开并触发相关的异步处理。本质上，信号通知其他任务就JSR 运行期间发生的事件，与正常中断类似，这些事件与被通知的任务是异步的。
6. 条件变量。条件变量是一个与共享资源相关的内核对象，它允许一个任务等待其他任务创建共享资据需要的条件。一个条件变量实现一个谓词，谓词是一组逻辑表达式，涉及共享资源的条件。谓词计算的结果是真或假， 如果计算为真，则任务假定条件被满足，并且继续运行，反之，任务必须等待所需要的条件。当任务检查一个条件变量时，必须原子性地访问，所以，条件变量通常跟一个互斥信号量一起使用。

***内核服务***
1. 异常与中断。
    - 异常是指任何打断处理器正常执行，迫使处理器进入特权执行模式的事件。异常可以分为同步异常和异步异常。同步异常是指程序内部与指令执行相关的事件引起的异常，例如，内存偶地址校准异常、除数为零异常等；异步异常是指与程序指令不相关的外部事件产生的异常，例如，系统复位异常、数据接收中断等。同步异常可以分为精确异常和不精确异常。精确异常是指处理器的程序计数器可以精确地指出引起异常的指令。而在流水线或指令预取的处理器上则不能精确地判断引起异常的指令或数据，这时的异常称为不精确异常。异步异常可以分为可屏蔽的异常和不可屏蔽的异常。可以被软件阻塞或开放的异步异常称为可屏蔽的异常，否则，为不可屏蔽异常。不可屏蔽的异常总是被处理器处理，例如，硬件复位异常。许多处理器具有一个专门的不可屏蔽中断请求线（NMI），任何连接到NMI 请求线的硬件都可以产生不可屏蔽中断。
    - 中断也称为外部中断，是一个由外部硬件产生的事件引起的异步异常，大多数嵌入式处理器体系结构中将中断归为异常的一类。实时内核最重要的指标是中断关了多长时间。所有的实时系统在进入临界代码时都要关中断，执行完临界代码之后离开中断。中断延迟时间是指关中断的最长时间与开始执行中断服务子程序的第一条指令的时间之和，中断恢复时间是微处理器返回到被中断的程序代码所需要的时间。

2. 计时器。
    
    计时器是实时嵌入式系统的一个组成部分。时间轮转调度算法、存储器定时刷新、网络数据包的超时重传以及目标机监视系统的时序等都严格依赖于计时器。许多嵌入式系统用不同形式的计时器来驱动时间敏感的活动，即硬件计时器和软件计时器。硬件计时器是从物理计时芯片派生出来的，超时后可以直接中断处理器，硬件计时器对精确的延迟操作具有可预测的性能。而软件计时器是通过软件功能调度的软件事件，能够对非精确的软件事件进行有效的调度，使用软件计时器可以减轻系统的中断负担。
    - 实时时钟：存在于嵌入式系统内部，用来追踪时间、日期的硬件计时设备。
    - 系统时钟：用来追踪从系统加电启动以来的事件时间或流失肘间，可编程的间隔计时器驱动系统时钟，计时器每中断一次，系统时钟的值就递增一次。
    - 时钟节拍：也称为时钟滴答，是特定的周期性中断。中断之间的问隔取决于不同的应用，一般在1 0～200ms之间。而且时钟节拍率越快，系统的额外开销就越大。
    - 可编程计时器：一般是集成在嵌入式系统内部的专门计时硬件，用做事件计数器、流失时间指示器、速率可控的周期事件产生器等。使用独立的硬件计时器可以有效地降低处理器的负载。
    - 软件计时器：是应用程序安装的计数器，每次时钟中断，会递减一次，当计数器到达0时，应用的计时器超时，系统会调用安装的超时处理函数进行有关处理。

3. I/O管理。

    从系统开发者的观点看，I/O操作意味着与设备的通信，对设备初始化、执行设备与系统之间的数据传输以及操作完成活通知请求者。从系统的观点看，I/O操作意味着对请求定位正确的设备，对设备定位正确的驱动程序，并保证对设备的同步访问。I/O设备、相关的驱动程序等共同组合成嵌入式系统的I/O子系统。

***常见的嵌入式操作系统***
1. VxWorks
2. Palm
3. Windows CE
4. Linux

***嵌入式系统数据库***

嵌入式DBMS就是在嵌入式设备上使用的DBMS。由于用到嵌入式DBMS的系统多是移动信息设备，如掌上电脑、PDA(Personal Digital Assistant，个人数字助理)、车载设备等移动通信设备。因此，嵌入式数据库也称为移动数据库或嵌入式移动数据库，其作用主要是解决移动计算环境下数据的管理问题，移动数据库是移动计算环境中的分布式数据库。

一个完整的嵌入式DBMS由若干子系统组成，包括主DBMS、同步服务器、嵌入式DBMS、连接网络等几个子系统。

***嵌入式系统网络***

嵌入式网络是用于连接各种嵌入式系统，使之可以互相传通信息、共享资源的网络系统。嵌入式系统在不同的场合采用不同的连接技术，如在家庭居室采用家庭信息网，在工业自动化领域采用现场总线，在移动信息设备等嵌入式系统则采用移动通信网，此外，还有一些专用连接技术用于连接嵌入式系统。
1. 现场总线网。现场总线(FieldBus)也被称做工业自动化领域的计算机局域网，是一种将数字传感器、变换器、工业仪表及控制执行机构等现场设备与工业过程控制单元、现场操作站等互相连接而形成的网络。它具有全数字化、分散、双向传输和多分支的特点，是工业控制网络向现场级发展的产物。现场总线是一种低带宽的底层控制网络，位于生产控制和网络结构的底层，因此也被称为底层网，它主要应用于生产现场，在测量控制设备之间实现双向的、串行的、多结点的数字通信。
2. 嵌入式因特网。随着Internet和嵌入式技术的飞速发展，越来越多的信息电器，如Web可视电话、机顶盒以及信息家电等嵌入式系统产品都要求与Internet连接，来共享Internet所提供的方便、快捷、无处不在的信息资源和服务，即嵌入式Internet技术。
    - 嵌入式因特网的接入方式。
        1. 直接接入式因特网。嵌入式设备上集成了TCP/IP协议找及相关软件，这类设备可以作为Internet的一个结点，分配有IP地址，与Internet直接互联。这种接入方式的特点是：设备可以直接连接到Internet，对Internet进行透明访问，不需要专门的接入设备，设备的协议标准化；需要的处理器性能和资源相对较高，需要占用IP资源。由于目前IPv4资源紧张，这种方案在IPv6网中可能更现实。
        2. 通过网关接入Internet。即采用瘦设备方案，设备不直接接入Internet，不需要复杂的TCP/IP协议全集，而是通过接入设备接入Internet。这种接入方式的特点是：对接入设备的性能和资源要求较低，接入设备的协议栈开销较小，不需要分配合法的IP地址，可以降低系统的整体成本：设备可以实现多样化、小型化。
    - 嵌入式TCP/IP协议栈。嵌入式TCP/IP协议栈完成的功能与完整的TCP/IP协议是相同的，但是由于嵌入式系统的资源限制，嵌入式协议栈的一些指标和接口等与普通的协议栈可能有所不同。
        1. 嵌入式协议栈的调用接口与普通的协议栈不同。
        2. 嵌入式协议栈的可裁剪性。
        3. 嵌入式协议栈的平台兼容性。
        4. 嵌入式协议栈的高效率。

***嵌入式系统开发***

嵌入式系统的软件开发方法不同子通用的开发方法，而是采用交叉式开发方法。

嵌入式系统的软件开发采用交叉平台开发方法(Cross Platfonn Development, CPD)，即软件在一个通用的平台上开发，而在另一个嵌入式目标平台上运行。

这个用于开发嵌入式软件的通用平台称为宿主机系统，被开发的嵌入式系统称为目标机系统。而当软件执行环境和开发环境一致时的开发过程则称为本地开发。

1. 开发环境通常包含三个高度集成的部分：
    - 运行在宿主机和目标机上的强有力的交叉开发工具和实用程序。
    - 运行在目标机上的高性能、可裁剪的RTOS。
    - 连接宿主机和目标机的多种通信方式。例如，以太网、串口线、ICE(In-Circuit Emulator，在线仿真器)、ROM仿真器等。

    宿主机提供的基本开发工具有交叉编译器、交叉链接器和源代码调试器等，作为目标机的嵌入式系统则可能提供一个动态装载器、链接装载器、监视器和一个调试代理等。在目标机和宿主机之间有一组连接，通过这组连接程序代码，映像从宿主机下就到目标机，这组连接同时也用来传输宿主机和目标机调试代理之间的信息。

    目前，嵌入式系统中常用的目标文件格式是COFF(Common Object File Format)和ELF(Executable Linking Format)。另外，一些系统还需要有一些专门工具将上述格式转换成二进制代码格式才可使用。
    
    典型地，一个目标文件包含：
    - 关于目标文件的通用信息，如文件尺寸、启动地址、代码段和数据段等具体信息。
    - 机器体系结构特定的二进制指令和数据。
    - 符号表和重定位表。
    - 调试信息。

2. 开发过程可以分为项目计划、可行性分析、需求分析、概要设计、详细设计、程序建立、下载、调试、固化、测试及运行等几个阶段。

通用系统与嵌入式系统的软件调试过程存在着明显的差异。对于通用系统，调试工具与被调试的程序位于同一台计算机上，调试工具通过操作系统的调试接口来控制被调试的程序。

***但是在嵌入式系统中，由于资源的限制，不能在其上直接开发应用程序，调试过程通常也以交叉方式进行的***。

在实际开发实践中，经常采用的调试方法有直接测试法、调试监控法、在线仿真法、片上调试法及模拟器法等。

1. 直接调试法。直接调试法是将目标代码下载到目标机上，让其执行，通过观察指示灯来判断程序的运行状态。在嵌入式系统发展的早期，一般采用这种方式进行，其基本步骤是：
    - 在宿主机上编写程序。
    - 在宿主机上编译、链接生成目标机可执行程序代码。
    - 将可执行代码写入到目标机的存储器中。
    - 在目标机运行程序代码。
    - 判断程序的运行情况，如有错误则纠正错误，重复以上步骤，直到正确为止。
    - 将可执行代码固化到目标机上，开发完成。
    
    这种方法是最原始的调试方法，程序运行时产生的问题，只有通过检查源代码来解决，因而开发效率很低。

2. 调试监控法。调试监控法也叫插桩法。目标机和宿主机一般通过串口、并口或以太网相连接，采用这种方法还需要在宿主机的调试器内和目标机的操作系统上分别启动一个功能模块，然后通过这两个功能模块的相互通信来实现对应用程序的调试。在目标机上添加的模块叫做桩(调试服务器、调试监控器)，主要有两个作用：监视和控制被调试的程序；与宿主机上的调试程序通信，接受控制指令，返回结果等。在进行调试的时候，宿主机上的调试器通过连接线路向调试监控器发送各种请求，实现目标机内存读/写和寄存器访问、程序下载、单步跟踪和设置断点等操作。来自宿主机的请求和目标机的响应都按照预定的通信协议进行交互。使用插桩法作为调试手段时，开发应用程序的基本步骤如下：
    - 在宿主机上编写程序的源代码。
    - 在宿主机编译、链接生成目标机可执行程序。
    - 将目标机可执行代码下载到目标机的存储器中。
    - 使用调试器进行调试。
    - 在调试器的帮助下定位错误。
    - 在宿主机上修改源代码，纠正错误，重复上述步骤直到正确为止。
    - 将可执行代码困化到目标机上。

    相对于直接测试法，插桩法明显地提高了开发效率，降低了调试的难度，缩短了产品的开发周期，有效降低了开发成本。

    为了克服插桩法的缺点，出现了一种改良的方法，即ROM仿真器法。

3. 在线仿真法。ICE是一种用于替代目标机上CPU的设备。对目标机来说，ICE就相当于它的CPU，在线仿真器本身就是一个嵌入式系统，有自己的CPU、内存和软件。ICE的CPU可以执行目标机的所有指令，但比一般的CPU有更多的引脚，能够将内部信号输出到被控制的目标机上，ICE的存储器也被映射到用户的程序空间，因此，即使没有目标机，仅用ICE也可以进行程序的调试。ICE和宿主机一般通过串口、并口或以太网相连接。在连接ICE和目标系统时，用ICE的CPU引出端口替代目标机的CPU。在用ICE调试程序时，在宿主机运行一个调试器界面程序，该程序根据用户的操作指令控制目标机上的程序运行。

4. 片上调试法。片上调试(In Circuit Debugger, ICD)是CPU芯片内部的一种用于支持调试的功能模块。按照实现的技术，ICD可以分为仿调试监控器、后台调试模式(Background Debugging Mode, BDM)、连接测试存取组(Joint Test Access Group, JTAG)和片上仿真(On Chip Emulation, OnCE)等几类。

5. 模拟器法。模拟器是运行于宿主机上的一个纯软件工具，它通过模拟目标机的指令系统或目标机操作系统的系统调用来达到在宿主机上运行和调试嵌入式应用程序的目的。


### 考点2 嵌入式系统的进程调度
---
### 考点3 嵌入式系统的能耗问题
---

#### 能耗与电源管理

典型的嵌入式系统，例如移动终端，其能耗主要部件包括嵌入式CPU、内存、LCD(Liquid Crystal Display，液晶显示器)及背光、电源转换部件，其他部件还可能包括基带处理器、DSP(Digital Signal Processing，数字信号处理)、外设控制器等。据统计，CPU占20%~25%, LCD以及背光占用了20%，内存占15%，电源转换占5%~10%,其他的部件占用剩余的30%~40%。在这些元件中，有些元件性能指标和能耗固定；有些元件可以在不同时间工作，并有多种可控的耗能状态。后者的有效使用成为系统节能的关键所在。

#### 动态电源管理(Dynamic Power Managemet，DPM)

降低功耗有两种机制：
1. 利用睡眠状态：当系统或设备在空闲的时候，可以被放置到低能量的睡眠状态。
2. 动态速度缩放：一些嵌入式系统可以在运行时改变自己的频率和速度，其能量函数为P(s)，表示速度为s时系统消耗的能量。在很多设定里，每一个工作可以在它们开始时被衡量出需要多少时间。因为能量函数是随s递增的，速度越快耗能越高。所以，在考虑其时间限制的前提下，可以通过改变系统速度使其执行速度减慢。
